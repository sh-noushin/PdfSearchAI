<Window x:Class="InternalAIAssistant.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:InternalAIAssistant"
    xmlns:helpers="clr-namespace:InternalAIAssistant.Helpers"
    Title="AI Assistant" Height="600" Width="400">
    <Window.Resources>
        <local:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <helpers:SenderToColorConverter x:Key="SenderToColorConverter"/>
    </Window.Resources>
    <Grid Background="#f5f6fa">
        <DockPanel>
            <ScrollViewer DockPanel.Dock="Top" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" Height="500" Margin="10" Name="ChatScrollViewer">
                <ItemsControl ItemsSource="{Binding Messages}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <VirtualizingStackPanel/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border CornerRadius="12" Padding="10" Margin="4" Background="{Binding Sender, Converter={StaticResource SenderToColorConverter}}">
                                <StackPanel>
                                    <TextBlock Text="{Binding Sender}" FontWeight="Bold" Foreground="#636e72" FontSize="13"/>
                                    <TextBlock Text="{Binding Message}" TextWrapping="Wrap" Foreground="#2d3436" FontSize="15"/>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </DockPanel>
        <StackPanel Orientation="Horizontal" Margin="10" VerticalAlignment="Bottom">
            <TextBox Text="{Binding UserInput, UpdateSourceTrigger=PropertyChanged}" Width="300" Height="32" FontSize="15" Padding="6" Background="#fff" BorderBrush="#dfe6e9" BorderThickness="1"/>
            <Button Command="{Binding SendCommand}" Content="Send" Width="70" Height="32" Margin="5,0,0,0" Background="#0984e3" Foreground="White" FontWeight="Bold" BorderThickness="0"/>
        </StackPanel>
        <!-- Removed busy overlay. 'AI is thinking...' will be shown in chat instead. -->
    </Grid>
</Window>